# Project Context: Greg's Place (Master Spec v5.4)

## CONFIGURATION SPECIFICATION & GLOBAL PARAMETERS
This section defines the required structure for the `config/_default/` files.
All settings must include comments explaining their function and default values.

### 1. Main Configuration (hugo.toml)
* **Base URL:** `https://simplygregario.us`
* **Title:** "Greg's Place"
* **Theme:** "Accessible-MD"
* **Permalinks:**
    * `pages = "/:slug/"` (Critical: Ensures /about/ works at root).
    * `articles`, `bookmarks` -> Slug-based.
    * `status`, `replies`, etc. -> Timestamp-based.
* **Outputs:** Home/Section must output `["HTML", "RSS", "JSON"]`.

### 2. Parameters (params.toml)
* **[author]**: Name, Bio (H-Card), Photo, Location.
* **[webmentions]**: `username`, `show_webmentions`.
    * `guestbookIntro`: Text for the Guestbook Welcome Card.
* **[theme]**: Options: "sound", "market", "mountain", "forest", "sunset".
* **Social:** Display Strategy: Text-Only Links ("Name: @Handle") for accessibility.

---

## CORE ARCHITECTURE & PHILOSOPHY

* **Priority:** W3C Standards, WCAG 2.2 AA Accessibility, IndieWeb.
* **Privacy:** "Static Facades" for all embeds. No tracking pixels on load.
* **Regression Policy:**
    * **Visuals:** "Outlined Card" metaphor (High Contrast Borders).
    * **Accessibility:** Focus states must always be visible.
    * **Integrity:** `setup_project.sh` must always reflect the current production state.

---

## STYLING & UX (MATERIAL DESIGN 3 - COMPLETE)

### 1. Visual System
* **Themes:** 5 Distinct Palettes defined in `_variables.scss`.
    * **Light Mode:** High contrast. Backgrounds are **Tinted Off-Whites**.
    * **Dark Mode:** Backgrounds are **Deeply Tinted Surfaces** (e.g., Deep Evergreen).
* **Elevation (Surface Tones):**
    * **Dark Mode:** Uses Semi-transparent White Overlays.
    * **Light Mode:** Uses **Primary Color Tints** + Soft Shadows.
* **Shape:** "Pill" inputs (28px) and Medium Cards (12px).

### 2. Typography & Layout
* **Typescale:** Tight Headlines (`1.12` leading), Loose Body (`1.6` leading).
* **Navigation:**
    * **Desktop:** Sticky Top App Bar (requires `scroll-padding-top`).
    * **Mobile:** **Navigation Drawer** (Modal Side-Sheet) with focus trapping (Inert).
* **Metadata (QoL):**
    * Posts display **Full Date/Time** (with Timezone) and **Reading Time** (Clock Icon).
    * "Last Updated" date appears if different from publish date.

### 3. Interaction & Motion
* **State Layers:** Interactive elements use overlay tints instead of color swaps.
* **Motion:** All animations use MD3 Standard Easing.
* **Feedback:** "Copy Code" and "Copy URL" triggers an accessible **Toast Notification**.

---

## JAVASCRIPT POLICY & SECURITY

* **Principle:** Minimal, purposeful JS. No frameworks.
* **Approved Modules:**
    1.  **Menu:** Handles state toggling, Scrim clicks, and **Inert Attribute** management.
    2.  **Webmentions:** Client-side fetch and HTML sanitization.
    3.  **Share Modal:** Native `<dialog>` element.
    4.  **Toast:** Live region management for status updates.
    5.  **Copy Logic:** Handles `data-clipboard-text` for generic copy buttons (URL pills).
    6.  **Search:** Pagefind (Client-side) with customized MD3 styling.

---

## CONTENT ARCHETYPES & TEMPLATES

* **Architecture:**
    * **Universal Layout:** `single.html` handles all content types (Articles, Status, Replies) via conditional logic.
    * **Universal Webmentions:** `partials/webmentions-card.html` handles the UI.
        * **Articles:** Target = `.Permalink`
        * **Guestbook:** Target = `.Site.BaseURL`
* **Frontmatter:**
    * `show_webmentions`: Boolean toggle (Defaults to true via smart fallback).
    * IndieWeb Params: `reply_to`, `like_of`, `repost_of`, `bookmark_of`, `rsvp`.

---

## DEVELOPMENT & AUTOMATION STANDARDS

* **Source of Truth:** `setup_project.sh` (Generated via `update_setup.sh`).
* **Content Creation:** `./new_post.sh [type] "Title"`
* **Icons:** `./generate_icons.sh` (Build-time fetch).
* **Deployment:** GitHub Actions -> Pagefind Indexing -> Pages.
