# Project Context: Greg's Place (Master Spec v5.2)

## CONFIGURATION SPECIFICATION & GLOBAL PARAMETERS
This section defines the required structure for the `config/_default/` files.
All settings must include comments explaining their function and default values.

### 1. Main Configuration (hugo.toml)
* **Base URL:** `https://simplygregario.us`
* **Title:** "Greg's Place"
* **Theme:** "Accessible-MD"
* **Permalinks:**
    * `pages = "/:slug/"` (Critical: Ensures /about/ works at root).
    * `articles`, `bookmarks` -> Slug-based.
    * `status`, `replies`, etc. -> Timestamp-based.
* **Outputs:** Home/Section must output `["HTML", "RSS", "JSON"]`.

### 2. Parameters (params.toml)
* **[author]**: Name, Bio (H-Card), Photo, Location.
* **[webmentions]**: `username`, `show_webmentions`.
* **[theme]**: Options: "sound", "market", "mountain", "forest", "sunset".
* **Social:** Display Strategy: Text-Only Links ("Name: @Handle") for accessibility.

---

## CORE ARCHITECTURE & PHILOSOPHY

* **Priority:** W3C Standards, WCAG 2.2 AA Accessibility, IndieWeb.
* **Privacy:** "Static Facades" for all embeds. No tracking pixels on load.
* **Regression Policy:**
    * **Visuals:** "Outlined Card" metaphor (High Contrast Borders).
    * **Accessibility:** Focus states must always be visible.
    * **Integrity:** `setup_project.sh` must always reflect the current production state.

---

## STYLING & UX (MATERIAL DESIGN 3 - FULL IMPLEMENTATION)

### 1. Visual System
* **Themes:** 5 Distinct Palettes defined in `_variables.scss`.
    * **Light Mode:** High contrast. Backgrounds are **Tinted Off-Whites** (e.g., Mint Cream).
    * **Dark Mode:** Backgrounds are **Deeply Tinted Surfaces** (e.g., Deep Evergreen). No generic charcoal.
* **Elevation (Surface Tones):**
    * **Dark Mode:** Uses Semi-transparent White Overlays.
    * **Light Mode:** Uses **Primary Color Tints** + Soft Shadows.
* **Shape:**
    * **Inputs/Search:** Full "Pill" shape (28px radius).
    * **Cards/Dialogs:** Medium rounded corners (12px - 16px).

### 2. Typography & Layout
* **Typescale:**
    * **Headlines:** Negative tracking (`-0.02em`) and tight leading (`1.12`).
    * **Body:** Positive tracking (`0.01em`) and relaxed leading (`1.6`).
* **Navigation:**
    * **Desktop:** Sticky Top App Bar (requires `scroll-padding-top`).
    * **Mobile:** **Navigation Drawer** (Modal Side-Sheet) with focus trapping (Inert).

### 3. Interaction & Motion
* **State Layers:** Interactive elements (Cards, Buttons, Links) use an overlay tint (8-12% opacity) on hover/focus instead of changing colors.
* **Motion:** All animations use MD3 Standard Easing (`cubic-bezier(0.2, 0.0, 0, 1.0)`).
* **Feedback:** "Copy Code" triggers an accessible **Toast Notification** (Live Region).

---

## JAVASCRIPT POLICY & SECURITY

* **Principle:** Minimal, purposeful JS. No frameworks.
* **Approved Modules:**
    1.  **Menu:** Handles state toggling, Scrim clicks, and **Inert Attribute** management.
    2.  **Webmentions:** Client-side fetch and HTML sanitization.
    3.  **Share Modal:** Native `<dialog>` element.
    4.  **Toast:** Live region management for status updates.
    5.  **Search:** Pagefind (Client-side) with customized MD3 styling.

---

## DEVELOPMENT & AUTOMATION STANDARDS

* **Source of Truth:** `setup_project.sh`
    * Must be generated via `maintenance/update_setup.sh`.
* **Content Creation:** `./new_post.sh [type] "Title"`
* **Icons:** `./generate_icons.sh` (Build-time fetch).
* **Deployment:** GitHub Actions -> Pagefind Indexing -> Pages.

---

## REGRESSION POLICY (STRICT)

1.  **Accessibility:** Every interactive element must have a visible focus state.
2.  **Contrast:** No text may fall below 4.5:1 contrast in any theme or mode.
3.  **Privacy:** No commit may introduce a third-party script tag or iframe that loads automatically.
